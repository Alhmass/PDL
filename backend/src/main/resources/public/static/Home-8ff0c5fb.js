import{d as f,r as m,c as a,w as b,v as _,a as l,F as k,b as w,e as y,f as L,o as s,t as I}from"./index-4a4752d9.js";import{a as d}from"./http-api-5418d72e.js";const C=l("h3",null,"Choose an image",-1),R=l("option",{disabled:"",value:""},"Selectionner une image",-1),U=["value"],S={key:1,disabled:""},A={key:3,disabled:""},D=l("hr",null,null,-1),F=l("img",{class:"preview",src:""},null,-1),$=[F],q=f({__name:"Home",setup(B){const n=m({id:-1,name:""}),u=m([]);c();function c(){d.getImageList().then(o=>{u.value=o}).catch(o=>{console.log(o.message)})}function g(){d.getImage(n.value.id).then(o=>{const e=o,t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){const r=URL.createObjectURL(e),i=document.createElement("a");i.href=r,i.setAttribute("download",n.value.name),document.body.appendChild(i),i.click(),URL.revokeObjectURL(r)}}).catch(o=>{console.log(o.message)})}function v(){d.deleteImage(n.value.id).then(o=>{c();let e=document.querySelector(".preview");e==null||e.setAttribute("src","")}).catch(o=>{console.log(o.message)})}function p(){d.getImage(n.value.id).then(o=>{let e=document.querySelector(".preview");const t=new window.FileReader;t.readAsDataURL(o),t.onload=function(){const r=t.result;e==null||e.setAttribute("src",r)}}).catch(o=>{console.log(o.message)})}function h(){L.push({name:"image",params:{id:n.value.id}})}return(o,e)=>(s(),a("div",null,[C,b(l("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),onChange:e[1]||(e[1]=t=>p())},[R,(s(!0),a(k,null,w(u.value,t=>(s(),a("option",{value:{id:t.id,name:t.name},key:t.id},I(t.name),9,U))),128))],544),[[_,n.value]]),n.value?(s(),a("button",{key:0,onClick:e[2]||(e[2]=t=>g())},"Télécharger")):(s(),a("button",S,"Télécharger")),n.value?(s(),a("button",{key:2,onClick:e[3]||(e[3]=t=>v())},"Supprimer")):(s(),a("button",A,"Supprimer")),D,n.value?(s(),a("a",{key:4,href:"#",onClick:e[4]||(e[4]=t=>h())},$)):y("",!0)]))}});export{q as default};
