import{d as f,r as m,c as a,w as b,v as k,a as d,F as w,b as _,e as y,f as L,o as s,t as I}from"./index-14a151b6.js";import{a as i}from"./http-api-5418d72e.js";const C=d("h3",null,"Choose an image",-1),R=d("option",{disabled:"",value:""},"Selectionner une image",-1),U=["value"],S={key:1,disabled:""},A={key:3,disabled:""},D=d("img",{class:"preview",src:""},null,-1),F=[D],j=f({__name:"Home",setup($){const n=m({id:-1,name:""}),u=m([]);c();function c(){i.getImageList().then(o=>{u.value=o}).catch(o=>{console.log(o.message)})}function g(){i.getImage(n.value.id).then(o=>{const e=o,t=new window.FileReader;t.readAsDataURL(e),t.onload=function(){const l=URL.createObjectURL(e),r=document.createElement("a");r.href=l,r.setAttribute("download",n.value.name),document.body.appendChild(r),r.click(),URL.revokeObjectURL(l)}}).catch(o=>{console.log(o.message)})}function v(){i.deleteImage(n.value.id).then(o=>{c();let e=document.querySelector(".preview");e==null||e.setAttribute("src","")}).catch(o=>{console.log(o.message)})}function p(){i.getImage(n.value.id).then(o=>{let e=document.querySelector(".preview");const t=new window.FileReader;t.readAsDataURL(o),t.onload=function(){const l=t.result;e==null||e.setAttribute("src",l)}}).catch(o=>{console.log(o.message)})}function h(){L.push({name:"image",params:{id:n.value.id}})}return(o,e)=>(s(),a("div",null,[C,b(d("select",{"onUpdate:modelValue":e[0]||(e[0]=t=>n.value=t),onChange:e[1]||(e[1]=t=>p())},[R,(s(!0),a(w,null,_(u.value,t=>(s(),a("option",{value:{id:t.id,name:t.name},key:t.id},I(t.name),9,U))),128))],544),[[k,n.value]]),n.value?(s(),a("button",{key:0,onClick:e[2]||(e[2]=t=>g())},"Télécharger")):(s(),a("button",S,"Télécharger")),n.value?(s(),a("button",{key:2,onClick:e[3]||(e[3]=t=>v())},"Supprimer")):(s(),a("button",A,"Supprimer")),n.value?(s(),a("a",{key:4,href:"#",onClick:e[4]||(e[4]=t=>h())},F)):y("",!0)]))}});export{j as default};
